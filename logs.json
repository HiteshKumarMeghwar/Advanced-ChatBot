{"text": "2025-12-07 00:11:22.834 | INFO     | main:lifespan:46 - Building chatbot graph (async)...\n", "record": {"elapsed": {"repr": "0:00:00.399735", "seconds": 0.399735}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 46, "message": "Building chatbot graph (async)...", "module": "main", "name": "main", "process": {"id": 23508, "name": "SpawnProcess-3"}, "thread": {"id": 896, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:11:22.834883+05:00", "timestamp": 1765048282.834883}}}
{"text": "2025-12-07 00:11:29.229 | ERROR    | main:lifespan:50 - Graph startup error: %s\n  + Exception Group Traceback (most recent call last):\n  |\n  |   File \"<string>\", line 1, in <module>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n  |     exitcode = _main(fd, parent_sentinel)\n  |                │     │   └ 200\n  |                │     └ 3\n  |                └ <function _main at 0x000001E1AE320AE0>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n  |     return self._bootstrap(parent_sentinel)\n  |            │    │          └ 200\n  |            │    └ <function BaseProcess._bootstrap at 0x000001E1ADDDCB80>\n  |            └ <SpawnProcess name='SpawnProcess-3' parent=4852 started>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\process.py\", line 314, in _bootstrap\n  |     self.run()\n  |     │    └ <function BaseProcess.run at 0x000001E1ADDDC0E0>\n  |     └ <SpawnProcess name='SpawnProcess-3' parent=4852 started>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\process.py\", line 108, in run\n  |     self._target(*self._args, **self._kwargs)\n  |     │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001E1AE0CE190>, 'target': <bound method Server.run of <uvicorn.server.Server...\n  |     │    │        │    │        └ <SpawnProcess name='SpawnProcess-3' parent=4852 started>\n  |     │    │        │    └ ()\n  |     │    │        └ <SpawnProcess name='SpawnProcess-3' parent=4852 started>\n  |     │    └ <function subprocess_started at 0x000001E1B051EA20>\n  |     └ <SpawnProcess name='SpawnProcess-3' parent=4852 started>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n  |     target(sockets=sockets)\n  |     │              └ [<socket.socket fd=444, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]\n  |     └ <bound method Server.run of <uvicorn.server.Server object at 0x000001E1B06A7790>>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n  |     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())\n  |            │           │    │             │                      │    │      └ <function Config.get_loop_factory at 0x000001E1B04A2D40>\n  |            │           │    │             │                      │    └ <uvicorn.config.Config object at 0x000001E1AE0CE190>\n  |            │           │    │             │                      └ <uvicorn.server.Server object at 0x000001E1B06A7790>\n  |            │           │    │             └ [<socket.socket fd=444, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]\n  |            │           │    └ <function Server.serve at 0x000001E1B051D580>\n  |            │           └ <uvicorn.server.Server object at 0x000001E1B06A7790>\n  |            └ <function asyncio_run at 0x000001E1B047BC40>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\_compat.py\", line 30, in asyncio_run\n  |     return runner.run(main)\n  |            │      │   └ <coroutine object Server.serve at 0x000001E1B067D4E0>\n  |            │      └ <function Runner.run at 0x000001E1AFDBD440>\n  |            └ <asyncio.runners.Runner object at 0x000001E1AE0FB150>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n  |     return self._loop.run_until_complete(task)\n  |            │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\s...\n  |            │    │     └ <function BaseEventLoop.run_until_complete at 0x000001E1AFDB2FC0>\n  |            │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |            └ <asyncio.runners.Runner object at 0x000001E1AE0FB150>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n  |     self.run_forever()\n  |     │    └ <function BaseEventLoop.run_forever at 0x000001E1AFDB2F20>\n  |     └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n  |     self._run_once()\n  |     │    └ <function BaseEventLoop._run_once at 0x000001E1AFDBCD60>\n  |     └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n  |     handle._run()\n  |     │      └ <function Handle._run at 0x000001E1AFD067A0>\n  |     └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n  |     self._context.run(self._callback, *self._args)\n  |     │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n  |     │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |     │    │            │    └ <member '_callback' of 'Handle' objects>\n  |     │    │            └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |     │    └ <member '_context' of 'Handle' objects>\n  |     └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\lifespan\\on.py\", line 86, in main\n  |     await app(scope, self.receive, self.send)\n  |           │   │      │    │        │    └ <function LifespanOn.send at 0x000001E1B0876DE0>\n  |           │   │      │    │        └ <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>\n  |           │   │      │    └ <function LifespanOn.receive at 0x000001E1B0876E80>\n  |           │   │      └ <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>\n  |           │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E1E29D2CD0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\middleware\\proxy_headers.py\", line 29, in __call__\n  |     return await self.app(scope, receive, send)\n  |                  │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |                  │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |                  │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |                  │    └ <fastapi.applications.FastAPI object at 0x000001E1E29A5050>\n  |                  └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001E1E29D2CD0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\applications.py\", line 1134, in __call__\n  |     await super().__call__(scope, receive, send)\n  |                            │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |                            │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |                            └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\applications.py\", line 107, in __call__\n  |     await self.middleware_stack(scope, receive, send)\n  |           │    │                │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │                │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │                └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E1E27B5A90>\n  |           └ <fastapi.applications.FastAPI object at 0x000001E1E29A5050>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 151, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E1E27B5A50>\n  |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001E1E27B5A90>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 77, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <slowapi.middleware.SlowAPIMiddleware object at 0x000001E1E0971590>\n  |           └ <starlette.middleware.cors.CORSMiddleware object at 0x000001E1E27B5A50>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 103, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E1E27D8CD0>\n  |           └ <slowapi.middleware.SlowAPIMiddleware object at 0x000001E1E0971590>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 49, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E1E27D8B50>\n  |           └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001E1E27D8CD0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <fastapi.routing.APIRouter object at 0x000001E1E29A5210>\n  |           └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001E1E27D8B50>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n  |     await self.middleware_stack(scope, receive, send)\n  |           │    │                │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │                │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │                └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001E1E29A5210>>\n  |           └ <fastapi.routing.APIRouter object at 0x000001E1E29A5210>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 725, in app\n  |     await self.lifespan(scope, receive, send)\n  |           │    │        │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │        │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001E1E29C0FD0>>\n  |           │    │        └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <function Router.lifespan at 0x000001E1B17EE480>\n  |           └ <fastapi.routing.APIRouter object at 0x000001E1E29A5210>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 694, in lifespan\n  |     async with self.lifespan_context(app) as maybe_state:\n  |                │    │                └ <fastapi.applications.FastAPI object at 0x000001E1E29A5050>\n  |                │    └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x000001E1E29B71A0>\n  |                └ <fastapi.routing.APIRouter object at 0x000001E1E29A5210>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x000001E1E29A5050>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x000001E1E29B6E80>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x000001E1E29A5050>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x000001E1E29B6B60>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x000001E1E29A5050>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x000001E1E29B6840>\n  |   [Previous line repeated 7 more times]\n  |\n  | > File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py\", line 47, in lifespan\n  |     app.state.chatbot = await build_graph(session)\n  |     │   │                     │           └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001E1E26DD3D0>\n  |     │   │                     └ <function build_graph at 0x000001E1E27B94E0>\n  |     │   └ <starlette.datastructures.State object at 0x000001E1E29A50D0>\n  |     └ <fastapi.applications.FastAPI object at 0x000001E1E29A5050>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\graphs\\chat_graph.py\", line 101, in build_graph\n  |     tools = await gather_tools()\n  |                   └ <function gather_tools at 0x000001E1CC343A60>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\tools\\gather_tools.py\", line 18, in gather_tools\n  |     mcp_tools = await multiserver_mcpclient_tools()\n  |                       └ <function multiserver_mcpclient_tools at 0x000001E1E2215440>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\tools\\multiserver_mcpclient_tools.py\", line 13, in multiserver_mcpclient_tools\n  |     return await _client.get_tools()\n  |                  │       └ <function MultiServerMCPClient.get_tools at 0x000001E1E278BA60>\n  |                  └ <langchain_mcp_adapters.client.MultiServerMCPClient object at 0x000001E1E21BB150>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\client.py\", line 189, in get_tools\n  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)\n  |                        │       │       └ [<Task finished name='Task-5' coro=<load_mcp_tools() done, defined at C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-p...\n  |                        │       └ <function gather at 0x000001E1AFD8E200>\n  |                        └ <module 'asyncio' from 'C:\\\\Users\\\\DEVELOPER-\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python311\\\\Lib\\\\asyncio\\\\__init__.py'>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\tools.py\", line 369, in load_mcp_tools\n  |     async with create_session(\n  |                └ <function create_session at 0x000001E1E278B240>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x000001E1E2DD4100>\n  |           │    │   │      │    └ McpError('Connection closed')\n  |           │    │   │      └ <class 'mcp.shared.exceptions.McpError'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object create_session at 0x000001E1B398ABD0>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x000001E1E29D32D0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 418, in create_session\n  |     async with _create_stdio_session(**params) as session:\n  |                │                       │          └ <mcp.client.session.ClientSession object at 0x000001E1E2DC6010>\n  |                │                       └ {'command': 'uv', 'args': ['run', '--with', 'fastmcp', 'fastmcp', 'run', '/code/expense-tracker-mcp/main.py'], 'session_kwarg...\n  |                └ <function _create_stdio_session at 0x000001E1E278AD40>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x000001E1E2DD4940>\n  |           │    │   │      │    └ McpError('Connection closed')\n  |           │    │   │      └ <class 'mcp.shared.exceptions.McpError'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object _create_stdio_session at 0x000001E1E2B38400>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x000001E1E29F4B10>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 230, in _create_stdio_session\n  |     async with (\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x000001E1E2DE4440>\n  |           │    │   │      │    └ ExceptionGroup('unhandled errors in a TaskGroup', [McpError('Connection closed')])\n  |           │    │   │      └ <class 'ExceptionGroup'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object stdio_client at 0x000001E1E2A6DFC0>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x000001E1E2A01590>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\stdio\\__init__.py\", line 182, in stdio_client\n  |     async with (\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n  |     raise BaseExceptionGroup(\n  |\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Exception Group Traceback (most recent call last):\n    |\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\stdio\\__init__.py\", line 189, in stdio_client\n    |     yield read_stream, write_stream\n    |           │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...\n    |           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 230, in _create_stdio_session\n    |     async with (\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\shared\\session.py\", line 220, in __aexit__\n    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)\n    |                  │    │           │         │         │        └ <traceback object at 0x000001E1E2DD4900>\n    |                  │    │           │         │         └ McpError('Connection closed')\n    |                  │    │           │         └ <class 'mcp.shared.exceptions.McpError'>\n    |                  │    │           └ <function TaskGroup.__aexit__ at 0x000001E1E2BAA020>\n    |                  │    └ <anyio._backends._asyncio.TaskGroup object at 0x000001E1E2DC5E50>\n    |                  └ <mcp.client.session.ClientSession object at 0x000001E1E2DC6010>\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n    |     raise BaseExceptionGroup(\n    |\n    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n    +-+---------------- 1 ----------------\n      | Traceback (most recent call last):\n      |\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 234, in _create_stdio_session\n      |     yield session\n      |           └ <mcp.client.session.ClientSession object at 0x000001E1E2DC6010>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 419, in create_session\n      |     yield session\n      |           └ <mcp.client.session.ClientSession object at 0x000001E1E2DC6010>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\tools.py\", line 372, in load_mcp_tools\n      |     await tool_session.initialize()\n      |           │            └ <function ClientSession.initialize at 0x000001E1E230B9C0>\n      |           └ <mcp.client.session.ClientSession object at 0x000001E1E2DC6010>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\session.py\", line 152, in initialize\n      |     result = await self.send_request(\n      |                    │    └ <function BaseSession.send_request at 0x000001E1E230A660>\n      |                    └ <mcp.client.session.ClientSession object at 0x000001E1E2DC6010>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\shared\\session.py\", line 288, in send_request\n      |     raise McpError(response_or_error.error)\n      |           │        │                 └ ErrorData(code=-32000, message='Connection closed', data=None)\n      |           │        └ JSONRPCError(jsonrpc='2.0', id=0, error=ErrorData(code=-32000, message='Connection closed', data=None))\n      |           └ <class 'mcp.shared.exceptions.McpError'>\n      |\n      | mcp.shared.exceptions.McpError: Connection closed\n      +------------------------------------\n", "record": {"elapsed": {"repr": "0:00:06.794410", "seconds": 6.79441}, "exception": {"type": "ExceptionGroup", "value": "unhandled errors in a TaskGroup (1 sub-exception)", "traceback": true}, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 50, "message": "Graph startup error: %s", "module": "main", "name": "main", "process": {"id": 23508, "name": "SpawnProcess-3"}, "thread": {"id": 896, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:11:29.229558+05:00", "timestamp": 1765048289.229558}}}
{"text": "2025-12-07 00:13:15.222 | INFO     | main:lifespan:47 - Building chatbot graph (async)...\n", "record": {"elapsed": {"repr": "0:00:00.248502", "seconds": 0.248502}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Building chatbot graph (async)...", "module": "main", "name": "main", "process": {"id": 22280, "name": "SpawnProcess-4"}, "thread": {"id": 9512, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:13:15.222355+05:00", "timestamp": 1765048395.222355}}}
{"text": "2025-12-07 00:13:17.992 | ERROR    | main:lifespan:51 - Graph startup error: %s\n  + Exception Group Traceback (most recent call last):\n  |\n  |   File \"<string>\", line 1, in <module>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n  |     exitcode = _main(fd, parent_sentinel)\n  |                │     │   └ 352\n  |                │     └ 3\n  |                └ <function _main at 0x0000019BA8370AE0>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n  |     return self._bootstrap(parent_sentinel)\n  |            │    │          └ 352\n  |            │    └ <function BaseProcess._bootstrap at 0x0000019BA7E4CB80>\n  |            └ <SpawnProcess name='SpawnProcess-4' parent=4852 started>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\process.py\", line 314, in _bootstrap\n  |     self.run()\n  |     │    └ <function BaseProcess.run at 0x0000019BA7E4C0E0>\n  |     └ <SpawnProcess name='SpawnProcess-4' parent=4852 started>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\process.py\", line 108, in run\n  |     self._target(*self._args, **self._kwargs)\n  |     │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000019BA813E190>, 'target': <bound method Server.run of <uvicorn.server.Server...\n  |     │    │        │    │        └ <SpawnProcess name='SpawnProcess-4' parent=4852 started>\n  |     │    │        │    └ ()\n  |     │    │        └ <SpawnProcess name='SpawnProcess-4' parent=4852 started>\n  |     │    └ <function subprocess_started at 0x0000019BAA57EA20>\n  |     └ <SpawnProcess name='SpawnProcess-4' parent=4852 started>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n  |     target(sockets=sockets)\n  |     │              └ [<socket.socket fd=396, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]\n  |     └ <bound method Server.run of <uvicorn.server.Server object at 0x0000019BAA6F7790>>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n  |     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())\n  |            │           │    │             │                      │    │      └ <function Config.get_loop_factory at 0x0000019BAA502D40>\n  |            │           │    │             │                      │    └ <uvicorn.config.Config object at 0x0000019BA813E190>\n  |            │           │    │             │                      └ <uvicorn.server.Server object at 0x0000019BAA6F7790>\n  |            │           │    │             └ [<socket.socket fd=396, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]\n  |            │           │    └ <function Server.serve at 0x0000019BAA57D580>\n  |            │           └ <uvicorn.server.Server object at 0x0000019BAA6F7790>\n  |            └ <function asyncio_run at 0x0000019BAA4DBC40>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\_compat.py\", line 30, in asyncio_run\n  |     return runner.run(main)\n  |            │      │   └ <coroutine object Server.serve at 0x0000019BAA6CD4E0>\n  |            │      └ <function Runner.run at 0x0000019BA9E3D440>\n  |            └ <asyncio.runners.Runner object at 0x0000019BA816B150>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n  |     return self._loop.run_until_complete(task)\n  |            │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\s...\n  |            │    │     └ <function BaseEventLoop.run_until_complete at 0x0000019BA9E32FC0>\n  |            │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |            └ <asyncio.runners.Runner object at 0x0000019BA816B150>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n  |     self.run_forever()\n  |     │    └ <function BaseEventLoop.run_forever at 0x0000019BA9E32F20>\n  |     └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n  |     self._run_once()\n  |     │    └ <function BaseEventLoop._run_once at 0x0000019BA9E3CD60>\n  |     └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n  |     handle._run()\n  |     │      └ <function Handle._run at 0x0000019BA87567A0>\n  |     └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n  |     self._context.run(self._callback, *self._args)\n  |     │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n  |     │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |     │    │            │    └ <member '_callback' of 'Handle' objects>\n  |     │    │            └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |     │    └ <member '_context' of 'Handle' objects>\n  |     └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\lifespan\\on.py\", line 86, in main\n  |     await app(scope, self.receive, self.send)\n  |           │   │      │    │        │    └ <function LifespanOn.send at 0x0000019BAA8B6DE0>\n  |           │   │      │    │        └ <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>\n  |           │   │      │    └ <function LifespanOn.receive at 0x0000019BAA8B6E80>\n  |           │   │      └ <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>\n  |           │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000019BDC9EF790>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\middleware\\proxy_headers.py\", line 29, in __call__\n  |     return await self.app(scope, receive, send)\n  |                  │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |                  │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |                  │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |                  │    └ <fastapi.applications.FastAPI object at 0x0000019BDC9E6890>\n  |                  └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000019BDC9EF790>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\applications.py\", line 1134, in __call__\n  |     await super().__call__(scope, receive, send)\n  |                            │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |                            │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |                            └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\applications.py\", line 107, in __call__\n  |     await self.middleware_stack(scope, receive, send)\n  |           │    │                │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │                │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │                └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000019BDC9FE9D0>\n  |           └ <fastapi.applications.FastAPI object at 0x0000019BDC9E6890>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 151, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000019BDC9FD150>\n  |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000019BDC9FE9D0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 77, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <slowapi.middleware.SlowAPIMiddleware object at 0x0000019BDC802C10>\n  |           └ <starlette.middleware.cors.CORSMiddleware object at 0x0000019BDC9FD150>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 103, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000019BDC9FF150>\n  |           └ <slowapi.middleware.SlowAPIMiddleware object at 0x0000019BDC802C10>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 49, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000019BDC9FE890>\n  |           └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000019BDC9FF150>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <fastapi.routing.APIRouter object at 0x0000019BDC9E6B50>\n  |           └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000019BDC9FE890>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n  |     await self.middleware_stack(scope, receive, send)\n  |           │    │                │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │                │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │                └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000019BDC9E6B50>>\n  |           └ <fastapi.routing.APIRouter object at 0x0000019BDC9E6B50>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 725, in app\n  |     await self.lifespan(scope, receive, send)\n  |           │    │        │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │        │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000019BDC9FD710>>\n  |           │    │        └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <function Router.lifespan at 0x0000019BAB82E480>\n  |           └ <fastapi.routing.APIRouter object at 0x0000019BDC9E6B50>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 694, in lifespan\n  |     async with self.lifespan_context(app) as maybe_state:\n  |                │    │                └ <fastapi.applications.FastAPI object at 0x0000019BDC9E6890>\n  |                │    └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x0000019BDC9F71A0>\n  |                └ <fastapi.routing.APIRouter object at 0x0000019BDC9E6B50>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x0000019BDC9E6890>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x0000019BDC9F6E80>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x0000019BDC9E6890>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x0000019BDC9F6B60>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x0000019BDC9E6890>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x0000019BDC9F6840>\n  |   [Previous line repeated 7 more times]\n  |\n  | > File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py\", line 48, in lifespan\n  |     app.state.chatbot = await build_graph(session)\n  |     │   │                     │           └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000019BDC9E7550>\n  |     │   │                     └ <function build_graph at 0x0000019BDC7F94E0>\n  |     │   └ <starlette.datastructures.State object at 0x0000019BDC9E6A10>\n  |     └ <fastapi.applications.FastAPI object at 0x0000019BDC9E6890>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\graphs\\chat_graph.py\", line 101, in build_graph\n  |     tools = await gather_tools()\n  |                   └ <function gather_tools at 0x0000019BC6393A60>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\tools\\gather_tools.py\", line 18, in gather_tools\n  |     mcp_tools = await multiserver_mcpclient_tools()\n  |                       └ <function multiserver_mcpclient_tools at 0x0000019BDC255440>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\tools\\multiserver_mcpclient_tools.py\", line 13, in multiserver_mcpclient_tools\n  |     return await _client.get_tools()\n  |                  │       └ <function MultiServerMCPClient.get_tools at 0x0000019BDC7CBA60>\n  |                  └ <langchain_mcp_adapters.client.MultiServerMCPClient object at 0x0000019BDC288D50>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\client.py\", line 189, in get_tools\n  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)\n  |                        │       │       └ [<Task finished name='Task-5' coro=<load_mcp_tools() done, defined at C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-p...\n  |                        │       └ <function gather at 0x0000019BA9E0E200>\n  |                        └ <module 'asyncio' from 'C:\\\\Users\\\\DEVELOPER-\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python311\\\\Lib\\\\asyncio\\\\__init__.py'>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\tools.py\", line 369, in load_mcp_tools\n  |     async with create_session(\n  |                └ <function create_session at 0x0000019BDC7CB240>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x0000019BDCE145C0>\n  |           │    │   │      │    └ McpError('Connection closed')\n  |           │    │   │      └ <class 'mcp.shared.exceptions.McpError'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object create_session at 0x0000019BAD9CABD0>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x0000019BDCA093D0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 418, in create_session\n  |     async with _create_stdio_session(**params) as session:\n  |                │                       │          └ <mcp.client.session.ClientSession object at 0x0000019BDCE02410>\n  |                │                       └ {'command': 'uv', 'args': ['run', '--with', 'fastmcp', 'fastmcp', 'run', '/code/expense-tracker-mcp/main.py'], 'session_kwarg...\n  |                └ <function _create_stdio_session at 0x0000019BDC7CAD40>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x0000019BDCE14E80>\n  |           │    │   │      │    └ McpError('Connection closed')\n  |           │    │   │      └ <class 'mcp.shared.exceptions.McpError'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object _create_stdio_session at 0x0000019BDCB78400>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x0000019BDCA66D10>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 230, in _create_stdio_session\n  |     async with (\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x0000019BDCE15FC0>\n  |           │    │   │      │    └ ExceptionGroup('unhandled errors in a TaskGroup', [McpError('Connection closed')])\n  |           │    │   │      └ <class 'ExceptionGroup'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object stdio_client at 0x0000019BDCAADFC0>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x0000019BDC802990>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\stdio\\__init__.py\", line 182, in stdio_client\n  |     async with (\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n  |     raise BaseExceptionGroup(\n  |\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Exception Group Traceback (most recent call last):\n    |\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\stdio\\__init__.py\", line 189, in stdio_client\n    |     yield read_stream, write_stream\n    |           │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...\n    |           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 230, in _create_stdio_session\n    |     async with (\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\shared\\session.py\", line 220, in __aexit__\n    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)\n    |                  │    │           │         │         │        └ <traceback object at 0x0000019BDCE14E40>\n    |                  │    │           │         │         └ McpError('Connection closed')\n    |                  │    │           │         └ <class 'mcp.shared.exceptions.McpError'>\n    |                  │    │           └ <function TaskGroup.__aexit__ at 0x0000019BDCBEE020>\n    |                  │    └ <anyio._backends._asyncio.TaskGroup object at 0x0000019BDCE02350>\n    |                  └ <mcp.client.session.ClientSession object at 0x0000019BDCE02410>\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n    |     raise BaseExceptionGroup(\n    |\n    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n    +-+---------------- 1 ----------------\n      | Traceback (most recent call last):\n      |\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 234, in _create_stdio_session\n      |     yield session\n      |           └ <mcp.client.session.ClientSession object at 0x0000019BDCE02410>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 419, in create_session\n      |     yield session\n      |           └ <mcp.client.session.ClientSession object at 0x0000019BDCE02410>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\tools.py\", line 372, in load_mcp_tools\n      |     await tool_session.initialize()\n      |           │            └ <function ClientSession.initialize at 0x0000019BDC34B9C0>\n      |           └ <mcp.client.session.ClientSession object at 0x0000019BDCE02410>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\session.py\", line 152, in initialize\n      |     result = await self.send_request(\n      |                    │    └ <function BaseSession.send_request at 0x0000019BDC34A660>\n      |                    └ <mcp.client.session.ClientSession object at 0x0000019BDCE02410>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\shared\\session.py\", line 288, in send_request\n      |     raise McpError(response_or_error.error)\n      |           │        │                 └ ErrorData(code=-32000, message='Connection closed', data=None)\n      |           │        └ JSONRPCError(jsonrpc='2.0', id=0, error=ErrorData(code=-32000, message='Connection closed', data=None))\n      |           └ <class 'mcp.shared.exceptions.McpError'>\n      |\n      | mcp.shared.exceptions.McpError: Connection closed\n      +------------------------------------\n", "record": {"elapsed": {"repr": "0:00:03.018862", "seconds": 3.018862}, "exception": {"type": "ExceptionGroup", "value": "unhandled errors in a TaskGroup (1 sub-exception)", "traceback": true}, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 51, "message": "Graph startup error: %s", "module": "main", "name": "main", "process": {"id": 22280, "name": "SpawnProcess-4"}, "thread": {"id": 9512, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:13:17.992715+05:00", "timestamp": 1765048397.992715}}}
{"text": "2025-12-07 00:16:41.187 | INFO     | main:lifespan:47 - Building chatbot graph (async)...\n", "record": {"elapsed": {"repr": "0:00:00.278473", "seconds": 0.278473}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Building chatbot graph (async)...", "module": "main", "name": "main", "process": {"id": 16132, "name": "SpawnProcess-1"}, "thread": {"id": 11340, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:16:41.187805+05:00", "timestamp": 1765048601.187805}}}
{"text": "2025-12-07 00:16:44.235 | ERROR    | main:lifespan:51 - Graph startup error: %s\n  + Exception Group Traceback (most recent call last):\n  |\n  |   File \"<string>\", line 1, in <module>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n  |     exitcode = _main(fd, parent_sentinel)\n  |                │     │   └ 356\n  |                │     └ 3\n  |                └ <function _main at 0x0000019508490AE0>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n  |     return self._bootstrap(parent_sentinel)\n  |            │    │          └ 356\n  |            │    └ <function BaseProcess._bootstrap at 0x0000019507F6CB80>\n  |            └ <SpawnProcess name='SpawnProcess-1' parent=11976 started>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\process.py\", line 314, in _bootstrap\n  |     self.run()\n  |     │    └ <function BaseProcess.run at 0x0000019507F6C0E0>\n  |     └ <SpawnProcess name='SpawnProcess-1' parent=11976 started>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\process.py\", line 108, in run\n  |     self._target(*self._args, **self._kwargs)\n  |     │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x000001950825E190>, 'target': <bound method Server.run of <uvicorn.server.Server...\n  |     │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=11976 started>\n  |     │    │        │    └ ()\n  |     │    │        └ <SpawnProcess name='SpawnProcess-1' parent=11976 started>\n  |     │    └ <function subprocess_started at 0x000001950A67EA20>\n  |     └ <SpawnProcess name='SpawnProcess-1' parent=11976 started>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n  |     target(sockets=sockets)\n  |     │              └ [<socket.socket fd=864, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]\n  |     └ <bound method Server.run of <uvicorn.server.Server object at 0x000001950A7F7790>>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n  |     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())\n  |            │           │    │             │                      │    │      └ <function Config.get_loop_factory at 0x000001950A602D40>\n  |            │           │    │             │                      │    └ <uvicorn.config.Config object at 0x000001950825E190>\n  |            │           │    │             │                      └ <uvicorn.server.Server object at 0x000001950A7F7790>\n  |            │           │    │             └ [<socket.socket fd=864, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]\n  |            │           │    └ <function Server.serve at 0x000001950A67D580>\n  |            │           └ <uvicorn.server.Server object at 0x000001950A7F7790>\n  |            └ <function asyncio_run at 0x000001950A5DBC40>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\_compat.py\", line 30, in asyncio_run\n  |     return runner.run(main)\n  |            │      │   └ <coroutine object Server.serve at 0x000001950A7CD4E0>\n  |            │      └ <function Runner.run at 0x0000019509F3D440>\n  |            └ <asyncio.runners.Runner object at 0x000001950828B150>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n  |     return self._loop.run_until_complete(task)\n  |            │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\s...\n  |            │    │     └ <function BaseEventLoop.run_until_complete at 0x0000019509F32FC0>\n  |            │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |            └ <asyncio.runners.Runner object at 0x000001950828B150>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n  |     self.run_forever()\n  |     │    └ <function BaseEventLoop.run_forever at 0x0000019509F32F20>\n  |     └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n  |     self._run_once()\n  |     │    └ <function BaseEventLoop._run_once at 0x0000019509F3CD60>\n  |     └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n  |     handle._run()\n  |     │      └ <function Handle._run at 0x0000019509E867A0>\n  |     └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n  |     self._context.run(self._callback, *self._args)\n  |     │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n  |     │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |     │    │            │    └ <member '_callback' of 'Handle' objects>\n  |     │    │            └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |     │    └ <member '_context' of 'Handle' objects>\n  |     └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\lifespan\\on.py\", line 86, in main\n  |     await app(scope, self.receive, self.send)\n  |           │   │      │    │        │    └ <function LifespanOn.send at 0x000001950A9A6DE0>\n  |           │   │      │    │        └ <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>\n  |           │   │      │    └ <function LifespanOn.receive at 0x000001950A9A6E80>\n  |           │   │      └ <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>\n  |           │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001953C8F4BD0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\middleware\\proxy_headers.py\", line 29, in __call__\n  |     return await self.app(scope, receive, send)\n  |                  │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |                  │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |                  │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |                  │    └ <fastapi.applications.FastAPI object at 0x000001953CAB2290>\n  |                  └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x000001953C8F4BD0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\applications.py\", line 1134, in __call__\n  |     await super().__call__(scope, receive, send)\n  |                            │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |                            │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |                            └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\applications.py\", line 107, in __call__\n  |     await self.middleware_stack(scope, receive, send)\n  |           │    │                │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │                │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │                └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001953C8D1C10>\n  |           └ <fastapi.applications.FastAPI object at 0x000001953CAB2290>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 151, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x000001953C8D23D0>\n  |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x000001953C8D1C10>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 77, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <slowapi.middleware.SlowAPIMiddleware object at 0x000001953C8D0B50>\n  |           └ <starlette.middleware.cors.CORSMiddleware object at 0x000001953C8D23D0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 103, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001953CACFD50>\n  |           └ <slowapi.middleware.SlowAPIMiddleware object at 0x000001953C8D0B50>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 49, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001953CACCE50>\n  |           └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x000001953CACFD50>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <fastapi.routing.APIRouter object at 0x000001953CAB2510>\n  |           └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x000001953CACCE50>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n  |     await self.middleware_stack(scope, receive, send)\n  |           │    │                │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │                │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │                └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x000001953CAB2510>>\n  |           └ <fastapi.routing.APIRouter object at 0x000001953CAB2510>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 725, in app\n  |     await self.lifespan(scope, receive, send)\n  |           │    │        │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │        │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x000001953CADA890>>\n  |           │    │        └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <function Router.lifespan at 0x000001950B91E480>\n  |           └ <fastapi.routing.APIRouter object at 0x000001953CAB2510>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 694, in lifespan\n  |     async with self.lifespan_context(app) as maybe_state:\n  |                │    │                └ <fastapi.applications.FastAPI object at 0x000001953CAB2290>\n  |                │    └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x000001953CAC71A0>\n  |                └ <fastapi.routing.APIRouter object at 0x000001953CAB2510>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x000001953CAB2290>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x000001953CAC6E80>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x000001953CAB2290>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x000001953CAC6B60>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x000001953CAB2290>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x000001953CAC6840>\n  |   [Previous line repeated 7 more times]\n  |\n  | > File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py\", line 48, in lifespan\n  |     app.state.chatbot = await build_graph(session)\n  |     │   │                     │           └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001953C8E9610>\n  |     │   │                     └ <function build_graph at 0x000001953C8C94E0>\n  |     │   └ <starlette.datastructures.State object at 0x000001953CAB23D0>\n  |     └ <fastapi.applications.FastAPI object at 0x000001953CAB2290>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\graphs\\chat_graph.py\", line 101, in build_graph\n  |     tools = await gather_tools()\n  |                   └ <function gather_tools at 0x0000019526473A60>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\tools\\gather_tools.py\", line 18, in gather_tools\n  |     mcp_tools = await multiserver_mcpclient_tools()\n  |                       └ <function multiserver_mcpclient_tools at 0x000001953C325440>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\tools\\multiserver_mcpclient_tools.py\", line 13, in multiserver_mcpclient_tools\n  |     return await _client.get_tools()\n  |                  │       └ <function MultiServerMCPClient.get_tools at 0x000001953C89BA60>\n  |                  └ <langchain_mcp_adapters.client.MultiServerMCPClient object at 0x0000019539871F10>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\client.py\", line 189, in get_tools\n  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)\n  |                        │       │       └ [<Task finished name='Task-5' coro=<load_mcp_tools() done, defined at C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-p...\n  |                        │       └ <function gather at 0x0000019509F0E200>\n  |                        └ <module 'asyncio' from 'C:\\\\Users\\\\DEVELOPER-\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python311\\\\Lib\\\\asyncio\\\\__init__.py'>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\tools.py\", line 369, in load_mcp_tools\n  |     async with create_session(\n  |                └ <function create_session at 0x000001953C89B240>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x000001953CED3400>\n  |           │    │   │      │    └ McpError('Connection closed')\n  |           │    │   │      └ <class 'mcp.shared.exceptions.McpError'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object create_session at 0x000001950DABABD0>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x000001953CAF9350>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 418, in create_session\n  |     async with _create_stdio_session(**params) as session:\n  |                │                       │          └ <mcp.client.session.ClientSession object at 0x000001953CED2650>\n  |                │                       └ {'command': 'uv', 'args': ['run', '--with', 'fastmcp', 'fastmcp', 'run', '/expense-tracker-mcp/main.py'], 'session_kwargs': {}}\n  |                └ <function _create_stdio_session at 0x000001953C89AD40>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x000001953CED33C0>\n  |           │    │   │      │    └ McpError('Connection closed')\n  |           │    │   │      └ <class 'mcp.shared.exceptions.McpError'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object _create_stdio_session at 0x000001953CC48400>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x000001953C8F4390>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 230, in _create_stdio_session\n  |     async with (\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x000001953CED2D00>\n  |           │    │   │      │    └ ExceptionGroup('unhandled errors in a TaskGroup', [McpError('Connection closed')])\n  |           │    │   │      └ <class 'ExceptionGroup'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object stdio_client at 0x000001953CB7DFC0>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x000001953C7E7710>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\stdio\\__init__.py\", line 182, in stdio_client\n  |     async with (\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n  |     raise BaseExceptionGroup(\n  |\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Exception Group Traceback (most recent call last):\n    |\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\stdio\\__init__.py\", line 189, in stdio_client\n    |     yield read_stream, write_stream\n    |           │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...\n    |           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 230, in _create_stdio_session\n    |     async with (\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\shared\\session.py\", line 220, in __aexit__\n    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)\n    |                  │    │           │         │         │        └ <traceback object at 0x000001953CED3440>\n    |                  │    │           │         │         └ McpError('Connection closed')\n    |                  │    │           │         └ <class 'mcp.shared.exceptions.McpError'>\n    |                  │    │           └ <function TaskGroup.__aexit__ at 0x000001953CCBE020>\n    |                  │    └ <anyio._backends._asyncio.TaskGroup object at 0x000001953CED25D0>\n    |                  └ <mcp.client.session.ClientSession object at 0x000001953CED2650>\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n    |     raise BaseExceptionGroup(\n    |\n    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n    +-+---------------- 1 ----------------\n      | Traceback (most recent call last):\n      |\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 234, in _create_stdio_session\n      |     yield session\n      |           └ <mcp.client.session.ClientSession object at 0x000001953CED2650>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 419, in create_session\n      |     yield session\n      |           └ <mcp.client.session.ClientSession object at 0x000001953CED2650>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\tools.py\", line 372, in load_mcp_tools\n      |     await tool_session.initialize()\n      |           │            └ <function ClientSession.initialize at 0x000001953C41B9C0>\n      |           └ <mcp.client.session.ClientSession object at 0x000001953CED2650>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\session.py\", line 152, in initialize\n      |     result = await self.send_request(\n      |                    │    └ <function BaseSession.send_request at 0x000001953C41A660>\n      |                    └ <mcp.client.session.ClientSession object at 0x000001953CED2650>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\shared\\session.py\", line 288, in send_request\n      |     raise McpError(response_or_error.error)\n      |           │        │                 └ ErrorData(code=-32000, message='Connection closed', data=None)\n      |           │        └ JSONRPCError(jsonrpc='2.0', id=0, error=ErrorData(code=-32000, message='Connection closed', data=None))\n      |           └ <class 'mcp.shared.exceptions.McpError'>\n      |\n      | mcp.shared.exceptions.McpError: Connection closed\n      +------------------------------------\n", "record": {"elapsed": {"repr": "0:00:03.326349", "seconds": 3.326349}, "exception": {"type": "ExceptionGroup", "value": "unhandled errors in a TaskGroup (1 sub-exception)", "traceback": true}, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 51, "message": "Graph startup error: %s", "module": "main", "name": "main", "process": {"id": 16132, "name": "SpawnProcess-1"}, "thread": {"id": 11340, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:16:44.235681+05:00", "timestamp": 1765048604.235681}}}
{"text": "2025-12-07 00:17:32.551 | INFO     | main:lifespan:47 - Building chatbot graph (async)...\n", "record": {"elapsed": {"repr": "0:00:00.171750", "seconds": 0.17175}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Building chatbot graph (async)...", "module": "main", "name": "main", "process": {"id": 14856, "name": "SpawnProcess-1"}, "thread": {"id": 15616, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:17:32.551345+05:00", "timestamp": 1765048652.551345}}}
{"text": "2025-12-07 00:17:38.096 | INFO     | main:lifespan:49 - Chatbot graph READY.\n", "record": {"elapsed": {"repr": "0:00:05.716943", "seconds": 5.716943}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 49, "message": "Chatbot graph READY.", "module": "main", "name": "main", "process": {"id": 14856, "name": "SpawnProcess-1"}, "thread": {"id": 15616, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:17:38.096538+05:00", "timestamp": 1765048658.096538}}}
{"text": "2025-12-07 00:23:21.701 | INFO     | main:lifespan:59 - Chatbot graph released.\n", "record": {"elapsed": {"repr": "0:05:49.322265", "seconds": 349.322265}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 59, "message": "Chatbot graph released.", "module": "main", "name": "main", "process": {"id": 14856, "name": "SpawnProcess-1"}, "thread": {"id": 15616, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:23:21.701860+05:00", "timestamp": 1765049001.70186}}}
{"text": "2025-12-07 00:23:44.698 | INFO     | main:lifespan:47 - Building chatbot graph (async)...\n", "record": {"elapsed": {"repr": "0:00:00.221662", "seconds": 0.221662}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Building chatbot graph (async)...", "module": "main", "name": "main", "process": {"id": 6928, "name": "SpawnProcess-2"}, "thread": {"id": 16472, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:23:44.698930+05:00", "timestamp": 1765049024.69893}}}
{"text": "2025-12-07 00:23:48.291 | ERROR    | main:lifespan:51 - Graph startup error: %s\n  + Exception Group Traceback (most recent call last):\n  |\n  |   File \"<string>\", line 1, in <module>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\spawn.py\", line 122, in spawn_main\n  |     exitcode = _main(fd, parent_sentinel)\n  |                │     │   └ 364\n  |                │     └ 3\n  |                └ <function _main at 0x0000020BEA0E0AE0>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\spawn.py\", line 135, in _main\n  |     return self._bootstrap(parent_sentinel)\n  |            │    │          └ 364\n  |            │    └ <function BaseProcess._bootstrap at 0x0000020BE9BBCB80>\n  |            └ <SpawnProcess name='SpawnProcess-2' parent=10128 started>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\process.py\", line 314, in _bootstrap\n  |     self.run()\n  |     │    └ <function BaseProcess.run at 0x0000020BE9BBC0E0>\n  |     └ <SpawnProcess name='SpawnProcess-2' parent=10128 started>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\multiprocessing\\process.py\", line 108, in run\n  |     self._target(*self._args, **self._kwargs)\n  |     │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x0000020BE9EAE190>, 'target': <bound method Server.run of <uvicorn.server.Server...\n  |     │    │        │    │        └ <SpawnProcess name='SpawnProcess-2' parent=10128 started>\n  |     │    │        │    └ ()\n  |     │    │        └ <SpawnProcess name='SpawnProcess-2' parent=10128 started>\n  |     │    └ <function subprocess_started at 0x0000020BEC25EA20>\n  |     └ <SpawnProcess name='SpawnProcess-2' parent=10128 started>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\_subprocess.py\", line 80, in subprocess_started\n  |     target(sockets=sockets)\n  |     │              └ [<socket.socket fd=576, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]\n  |     └ <bound method Server.run of <uvicorn.server.Server object at 0x0000020BEC3D7790>>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\server.py\", line 67, in run\n  |     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())\n  |            │           │    │             │                      │    │      └ <function Config.get_loop_factory at 0x0000020BEC1E2D40>\n  |            │           │    │             │                      │    └ <uvicorn.config.Config object at 0x0000020BE9EAE190>\n  |            │           │    │             │                      └ <uvicorn.server.Server object at 0x0000020BEC3D7790>\n  |            │           │    │             └ [<socket.socket fd=576, family=2, type=1, proto=6, laddr=('127.0.0.1', 8000)>]\n  |            │           │    └ <function Server.serve at 0x0000020BEC25D580>\n  |            │           └ <uvicorn.server.Server object at 0x0000020BEC3D7790>\n  |            └ <function asyncio_run at 0x0000020BEC1BBC40>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\_compat.py\", line 30, in asyncio_run\n  |     return runner.run(main)\n  |            │      │   └ <coroutine object Server.serve at 0x0000020BEC3AD4E0>\n  |            │      └ <function Runner.run at 0x0000020BEBB1D440>\n  |            └ <asyncio.runners.Runner object at 0x0000020BE9EDB150>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\runners.py\", line 118, in run\n  |     return self._loop.run_until_complete(task)\n  |            │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\s...\n  |            │    │     └ <function BaseEventLoop.run_until_complete at 0x0000020BEBB12FC0>\n  |            │    └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |            └ <asyncio.runners.Runner object at 0x0000020BE9EDB150>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 641, in run_until_complete\n  |     self.run_forever()\n  |     │    └ <function BaseEventLoop.run_forever at 0x0000020BEBB12F20>\n  |     └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 608, in run_forever\n  |     self._run_once()\n  |     │    └ <function BaseEventLoop._run_once at 0x0000020BEBB1CD60>\n  |     └ <_WindowsSelectorEventLoop running=True closed=False debug=False>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\base_events.py\", line 1936, in _run_once\n  |     handle._run()\n  |     │      └ <function Handle._run at 0x0000020BEBA667A0>\n  |     └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\events.py\", line 84, in _run\n  |     self._context.run(self._callback, *self._args)\n  |     │    │            │    │           │    └ <member '_args' of 'Handle' objects>\n  |     │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |     │    │            │    └ <member '_callback' of 'Handle' objects>\n  |     │    │            └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |     │    └ <member '_context' of 'Handle' objects>\n  |     └ <Handle Task.task_wakeup(<_GatheringFu... closed')])])>)>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\lifespan\\on.py\", line 86, in main\n  |     await app(scope, self.receive, self.send)\n  |           │   │      │    │        │    └ <function LifespanOn.send at 0x0000020BEC596DE0>\n  |           │   │      │    │        └ <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>\n  |           │   │      │    └ <function LifespanOn.receive at 0x0000020BEC596E80>\n  |           │   │      └ <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>\n  |           │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000020B9E87B290>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\uvicorn\\middleware\\proxy_headers.py\", line 29, in __call__\n  |     return await self.app(scope, receive, send)\n  |                  │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |                  │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |                  │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |                  │    └ <fastapi.applications.FastAPI object at 0x0000020B9E831ED0>\n  |                  └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x0000020B9E87B290>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\applications.py\", line 1134, in __call__\n  |     await super().__call__(scope, receive, send)\n  |                            │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |                            │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |                            └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\applications.py\", line 107, in __call__\n  |     await self.middleware_stack(scope, receive, send)\n  |           │    │                │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │                │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │                └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020B9E6525D0>\n  |           └ <fastapi.applications.FastAPI object at 0x0000020B9E831ED0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\errors.py\", line 151, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020B9E651BD0>\n  |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x0000020B9E6525D0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\cors.py\", line 77, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <slowapi.middleware.SlowAPIMiddleware object at 0x0000020B9E7D7D90>\n  |           └ <starlette.middleware.cors.CORSMiddleware object at 0x0000020B9E651BD0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\base.py\", line 103, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020B9E5754D0>\n  |           └ <slowapi.middleware.SlowAPIMiddleware object at 0x0000020B9E7D7D90>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\middleware\\exceptions.py\", line 49, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000020B9E88B210>\n  |           └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x0000020B9E5754D0>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\middleware\\asyncexitstack.py\", line 18, in __call__\n  |     await self.app(scope, receive, send)\n  |           │    │   │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │   │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │   └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <fastapi.routing.APIRouter object at 0x0000020B9E832150>\n  |           └ <fastapi.middleware.asyncexitstack.AsyncExitStackMiddleware object at 0x0000020B9E88B210>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 716, in __call__\n  |     await self.middleware_stack(scope, receive, send)\n  |           │    │                │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │                │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │                └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x0000020B9E832150>>\n  |           └ <fastapi.routing.APIRouter object at 0x0000020B9E832150>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 725, in app\n  |     await self.lifespan(scope, receive, send)\n  |           │    │        │      │        └ <bound method LifespanOn.send of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │        │      └ <bound method LifespanOn.receive of <uvicorn.lifespan.on.LifespanOn object at 0x0000020B9E668E90>>\n  |           │    │        └ {'type': 'lifespan', 'asgi': {'version': '3.0', 'spec_version': '2.0'}, 'state': {}, 'app': <fastapi.applications.FastAPI obj...\n  |           │    └ <function Router.lifespan at 0x0000020BED50E480>\n  |           └ <fastapi.routing.APIRouter object at 0x0000020B9E832150>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\starlette\\routing.py\", line 694, in lifespan\n  |     async with self.lifespan_context(app) as maybe_state:\n  |                │    │                └ <fastapi.applications.FastAPI object at 0x0000020B9E831ED0>\n  |                │    └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x0000020B9E8471A0>\n  |                └ <fastapi.routing.APIRouter object at 0x0000020B9E832150>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x0000020B9E831ED0>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x0000020B9E846E80>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x0000020B9E831ED0>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x0000020B9E846B60>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\fastapi\\routing.py\", line 211, in merged_lifespan\n  |     async with original_context(app) as maybe_original_state:\n  |                │                └ <fastapi.applications.FastAPI object at 0x0000020B9E831ED0>\n  |                └ <function _merge_lifespan_context.<locals>.merged_lifespan at 0x0000020B9E846840>\n  |   [Previous line repeated 7 more times]\n  |\n  | > File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py\", line 48, in lifespan\n  |     app.state.chatbot = await build_graph(session)\n  |     │   │                     │           └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000020BEC592650>\n  |     │   │                     └ <function build_graph at 0x0000020B9E6494E0>\n  |     │   └ <starlette.datastructures.State object at 0x0000020B9E832050>\n  |     └ <fastapi.applications.FastAPI object at 0x0000020B9E831ED0>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\graphs\\chat_graph.py\", line 101, in build_graph\n  |     tools = await gather_tools()\n  |                   └ <function gather_tools at 0x0000020B881A3A60>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\tools\\gather_tools.py\", line 18, in gather_tools\n  |     mcp_tools = await multiserver_mcpclient_tools()\n  |                       └ <function multiserver_mcpclient_tools at 0x0000020B9E095440>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\tools\\multiserver_mcpclient_tools.py\", line 13, in multiserver_mcpclient_tools\n  |     return await _client.get_tools()\n  |                  │       └ <function MultiServerMCPClient.get_tools at 0x0000020B9E61BA60>\n  |                  └ <langchain_mcp_adapters.client.MultiServerMCPClient object at 0x0000020B9E051D90>\n  |\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\client.py\", line 189, in get_tools\n  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)\n  |                        │       │       └ [<Task finished name='Task-5' coro=<load_mcp_tools() done, defined at C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-p...\n  |                        │       └ <function gather at 0x0000020BEBAEE200>\n  |                        └ <module 'asyncio' from 'C:\\\\Users\\\\DEVELOPER-\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python311\\\\Lib\\\\asyncio\\\\__init__.py'>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\tools.py\", line 369, in load_mcp_tools\n  |     async with create_session(\n  |                └ <function create_session at 0x0000020B9E61B240>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x0000020B9EC71B40>\n  |           │    │   │      │    └ McpError('Connection closed')\n  |           │    │   │      └ <class 'mcp.shared.exceptions.McpError'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object create_session at 0x0000020BEF6AABD0>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x0000020B9E669690>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 418, in create_session\n  |     async with _create_stdio_session(**params) as session:\n  |                │                       │          └ <mcp.client.session.ClientSession object at 0x0000020B9EC72250>\n  |                │                       └ {'command': 'uv', 'args': ['run', '--with', 'fastmcp', 'fastmcp', 'run', '/code/expense-tracker-mcp/main.py'], 'session_kwarg...\n  |                └ <function _create_stdio_session at 0x0000020B9E61AD40>\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x0000020B9EC73040>\n  |           │    │   │      │    └ McpError('Connection closed')\n  |           │    │   │      └ <class 'mcp.shared.exceptions.McpError'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object _create_stdio_session at 0x0000020B9E9E8400>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x0000020B9E889050>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 230, in _create_stdio_session\n  |     async with (\n  |   File \"C:\\Users\\DEVELOPER-\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\contextlib.py\", line 231, in __aexit__\n  |     await self.gen.athrow(typ, value, traceback)\n  |           │    │   │      │    │      └ <traceback object at 0x0000020B9EC73180>\n  |           │    │   │      │    └ ExceptionGroup('unhandled errors in a TaskGroup', [McpError('Connection closed')])\n  |           │    │   │      └ <class 'ExceptionGroup'>\n  |           │    │   └ <method 'athrow' of 'async_generator' objects>\n  |           │    └ <async_generator object stdio_client at 0x0000020B9E91DFC0>\n  |           └ <contextlib._AsyncGeneratorContextManager object at 0x0000020B9E833910>\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\stdio\\__init__.py\", line 182, in stdio_client\n  |     async with (\n  |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n  |     raise BaseExceptionGroup(\n  |\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Exception Group Traceback (most recent call last):\n    |\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\stdio\\__init__.py\", line 189, in stdio_client\n    |     yield read_stream, write_stream\n    |           │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...\n    |           └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 230, in _create_stdio_session\n    |     async with (\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\shared\\session.py\", line 220, in __aexit__\n    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)\n    |                  │    │           │         │         │        └ <traceback object at 0x0000020B9EC73000>\n    |                  │    │           │         │         └ McpError('Connection closed')\n    |                  │    │           │         └ <class 'mcp.shared.exceptions.McpError'>\n    |                  │    │           └ <function TaskGroup.__aexit__ at 0x0000020B9EA5E020>\n    |                  │    └ <anyio._backends._asyncio.TaskGroup object at 0x0000020B9EC72190>\n    |                  └ <mcp.client.session.ClientSession object at 0x0000020B9EC72250>\n    |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\anyio\\_backends\\_asyncio.py\", line 781, in __aexit__\n    |     raise BaseExceptionGroup(\n    |\n    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n    +-+---------------- 1 ----------------\n      | Traceback (most recent call last):\n      |\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 234, in _create_stdio_session\n      |     yield session\n      |           └ <mcp.client.session.ClientSession object at 0x0000020B9EC72250>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\sessions.py\", line 419, in create_session\n      |     yield session\n      |           └ <mcp.client.session.ClientSession object at 0x0000020B9EC72250>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\langchain_mcp_adapters\\tools.py\", line 372, in load_mcp_tools\n      |     await tool_session.initialize()\n      |           │            └ <function ClientSession.initialize at 0x0000020B9E18B9C0>\n      |           └ <mcp.client.session.ClientSession object at 0x0000020B9EC72250>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\client\\session.py\", line 152, in initialize\n      |     result = await self.send_request(\n      |                    │    └ <function BaseSession.send_request at 0x0000020B9E18A660>\n      |                    └ <mcp.client.session.ClientSession object at 0x0000020B9EC72250>\n      |   File \"C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\venv-bot-py311\\Lib\\site-packages\\mcp\\shared\\session.py\", line 288, in send_request\n      |     raise McpError(response_or_error.error)\n      |           │        │                 └ ErrorData(code=-32000, message='Connection closed', data=None)\n      |           │        └ JSONRPCError(jsonrpc='2.0', id=0, error=ErrorData(code=-32000, message='Connection closed', data=None))\n      |           └ <class 'mcp.shared.exceptions.McpError'>\n      |\n      | mcp.shared.exceptions.McpError: Connection closed\n      +------------------------------------\n", "record": {"elapsed": {"repr": "0:00:03.814468", "seconds": 3.814468}, "exception": {"type": "ExceptionGroup", "value": "unhandled errors in a TaskGroup (1 sub-exception)", "traceback": true}, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "❌", "name": "ERROR", "no": 40}, "line": 51, "message": "Graph startup error: %s", "module": "main", "name": "main", "process": {"id": 6928, "name": "SpawnProcess-2"}, "thread": {"id": 16472, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:23:48.291736+05:00", "timestamp": 1765049028.291736}}}
{"text": "2025-12-07 00:34:57.678 | INFO     | main:lifespan:47 - Building chatbot graph (async)...\n", "record": {"elapsed": {"repr": "0:00:00.249734", "seconds": 0.249734}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Building chatbot graph (async)...", "module": "main", "name": "main", "process": {"id": 20192, "name": "SpawnProcess-3"}, "thread": {"id": 13664, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:34:57.678956+05:00", "timestamp": 1765049697.678956}}}
{"text": "2025-12-07 00:35:07.559 | INFO     | main:lifespan:49 - Chatbot graph READY.\n", "record": {"elapsed": {"repr": "0:00:10.130217", "seconds": 10.130217}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 49, "message": "Chatbot graph READY.", "module": "main", "name": "main", "process": {"id": 20192, "name": "SpawnProcess-3"}, "thread": {"id": 13664, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:35:07.559439+05:00", "timestamp": 1765049707.559439}}}
{"text": "2025-12-07 00:36:03.790 | INFO     | main:lifespan:59 - Chatbot graph released.\n", "record": {"elapsed": {"repr": "0:01:06.361438", "seconds": 66.361438}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 59, "message": "Chatbot graph released.", "module": "main", "name": "main", "process": {"id": 20192, "name": "SpawnProcess-3"}, "thread": {"id": 13664, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:36:03.790660+05:00", "timestamp": 1765049763.79066}}}
{"text": "2025-12-07 00:36:20.509 | INFO     | main:lifespan:47 - Building chatbot graph (async)...\n", "record": {"elapsed": {"repr": "0:00:00.177577", "seconds": 0.177577}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Building chatbot graph (async)...", "module": "main", "name": "main", "process": {"id": 15340, "name": "SpawnProcess-4"}, "thread": {"id": 15540, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:36:20.509682+05:00", "timestamp": 1765049780.509682}}}
{"text": "2025-12-07 00:36:26.556 | INFO     | main:lifespan:49 - Chatbot graph READY.\n", "record": {"elapsed": {"repr": "0:00:06.224881", "seconds": 6.224881}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 49, "message": "Chatbot graph READY.", "module": "main", "name": "main", "process": {"id": 15340, "name": "SpawnProcess-4"}, "thread": {"id": 15540, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:36:26.556986+05:00", "timestamp": 1765049786.556986}}}
{"text": "2025-12-07 00:54:05.615 | INFO     | main:lifespan:59 - Chatbot graph released.\n", "record": {"elapsed": {"repr": "0:17:45.283014", "seconds": 1065.283014}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 59, "message": "Chatbot graph released.", "module": "main", "name": "main", "process": {"id": 15340, "name": "SpawnProcess-4"}, "thread": {"id": 15540, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:54:05.615119+05:00", "timestamp": 1765050845.615119}}}
{"text": "2025-12-07 00:54:26.513 | INFO     | main:lifespan:47 - Building chatbot graph (async)...\n", "record": {"elapsed": {"repr": "0:00:00.192920", "seconds": 0.19292}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Building chatbot graph (async)...", "module": "main", "name": "main", "process": {"id": 7276, "name": "SpawnProcess-5"}, "thread": {"id": 3772, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:54:26.513506+05:00", "timestamp": 1765050866.513506}}}
{"text": "2025-12-07 00:54:34.451 | INFO     | main:lifespan:49 - Chatbot graph READY.\n", "record": {"elapsed": {"repr": "0:00:08.131248", "seconds": 8.131248}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 49, "message": "Chatbot graph READY.", "module": "main", "name": "main", "process": {"id": 7276, "name": "SpawnProcess-5"}, "thread": {"id": 3772, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:54:34.451834+05:00", "timestamp": 1765050874.451834}}}
{"text": "2025-12-07 00:56:41.034 | INFO     | main:lifespan:59 - Chatbot graph released.\n", "record": {"elapsed": {"repr": "0:02:14.714040", "seconds": 134.71404}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 59, "message": "Chatbot graph released.", "module": "main", "name": "main", "process": {"id": 7276, "name": "SpawnProcess-5"}, "thread": {"id": 3772, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:56:41.034626+05:00", "timestamp": 1765051001.034626}}}
{"text": "2025-12-07 00:57:03.874 | INFO     | main:lifespan:47 - Building chatbot graph (async)...\n", "record": {"elapsed": {"repr": "0:00:00.138322", "seconds": 0.138322}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Building chatbot graph (async)...", "module": "main", "name": "main", "process": {"id": 1316, "name": "SpawnProcess-1"}, "thread": {"id": 3396, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:57:03.874403+05:00", "timestamp": 1765051023.874403}}}
{"text": "2025-12-07 00:57:10.519 | INFO     | main:lifespan:49 - Chatbot graph READY.\n", "record": {"elapsed": {"repr": "0:00:06.783423", "seconds": 6.783423}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 49, "message": "Chatbot graph READY.", "module": "main", "name": "main", "process": {"id": 1316, "name": "SpawnProcess-1"}, "thread": {"id": 3396, "name": "MainThread"}, "time": {"repr": "2025-12-07 00:57:10.519504+05:00", "timestamp": 1765051030.519504}}}
{"text": "2025-12-07 01:04:41.594 | INFO     | main:lifespan:59 - Chatbot graph released.\n", "record": {"elapsed": {"repr": "0:07:37.858172", "seconds": 457.858172}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 59, "message": "Chatbot graph released.", "module": "main", "name": "main", "process": {"id": 1316, "name": "SpawnProcess-1"}, "thread": {"id": 3396, "name": "MainThread"}, "time": {"repr": "2025-12-07 01:04:41.594253+05:00", "timestamp": 1765051481.594253}}}
{"text": "2025-12-07 01:05:03.725 | INFO     | main:lifespan:47 - Building chatbot graph (async)...\n", "record": {"elapsed": {"repr": "0:00:00.187442", "seconds": 0.187442}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 47, "message": "Building chatbot graph (async)...", "module": "main", "name": "main", "process": {"id": 23080, "name": "SpawnProcess-2"}, "thread": {"id": 19244, "name": "MainThread"}, "time": {"repr": "2025-12-07 01:05:03.725813+05:00", "timestamp": 1765051503.725813}}}
{"text": "2025-12-07 01:05:12.145 | INFO     | main:lifespan:49 - Chatbot graph READY.\n", "record": {"elapsed": {"repr": "0:00:08.606707", "seconds": 8.606707}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 49, "message": "Chatbot graph READY.", "module": "main", "name": "main", "process": {"id": 23080, "name": "SpawnProcess-2"}, "thread": {"id": 19244, "name": "MainThread"}, "time": {"repr": "2025-12-07 01:05:12.145078+05:00", "timestamp": 1765051512.145078}}}
{"text": "2025-12-07 01:06:17.563 | INFO     | main:lifespan:59 - Chatbot graph released.\n", "record": {"elapsed": {"repr": "0:01:14.025534", "seconds": 74.025534}, "exception": null, "extra": {}, "file": {"name": "main.py", "path": "C:\\Users\\DEVELOPER-\\Desktop\\Advanced-ChatBot\\main.py"}, "function": "lifespan", "level": {"icon": "ℹ️", "name": "INFO", "no": 20}, "line": 59, "message": "Chatbot graph released.", "module": "main", "name": "main", "process": {"id": 23080, "name": "SpawnProcess-2"}, "thread": {"id": 19244, "name": "MainThread"}, "time": {"repr": "2025-12-07 01:06:17.563905+05:00", "timestamp": 1765051577.563905}}}
